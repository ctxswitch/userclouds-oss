# Container Runner Tool

This tools runs UserClouds services in a container (docker) environment and proxies requests to the container endpoint to the various services running inside the container.

The tool has 3 main functions:

* Running UserClouds services executables
* Routing requests to the services
* Optionally running [ucconfig](./../ucconfig/)

## Running UserClouds services executables

Similar to [devbox](./../devbox/) and using the same [multirun](./../../infra/multirun/) infrastructure package.
Currently, we run 3 services inside the container:

* UserStore (IDP)
* AuthZ
* Plex (AuthN)

## Routing requests to the services

The tool reads the routing config rules from a yaml file which is generated by the [export routing tool](./../exportrouting/main.go) which generates the routing rules by parsing the [Kubernetes Ingress](./../../helm/userclouds/templates/ingress-webapp.yaml) rules we actually use in our Kubernetes deployment.

## Running ucconfig

The tool can also optionally run [ucconfig](./../ucconfig/) in order to apply a manifest to the tenant running in the container.
Note that this is optional, the container runner will only run ucconfig if the manifest files is specified and exists.
In a container environment, it is recommended to provide this file by mounting the host folder containing it into the a volume in the container.
There is always an option to run ucconfig from the host system. so using this feature of container running is optional.
